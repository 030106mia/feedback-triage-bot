{% extends "base.html" %}
{% block content %}
  <div class="bg-white border rounded-xl overflow-hidden">
    <div class="px-4 py-3 border-b">
      <div class="font-medium">批量 triage（最近 N 封 out/emails）</div>
      <div class="text-sm text-slate-600">允许失败不中断；结果写入 `out/triage/<email_id>.triage.json`。</div>
    </div>

    <div class="p-4 space-y-4">
      <form
        class="flex items-end gap-3"
        hx-post="{{ request.url_for('api_batch_start') }}"
        hx-target="#batch-status"
        hx-swap="innerHTML"
      >
        <div>
          <label class="text-xs text-slate-500">最近 N 封</label>
          <input
            class="mt-1 border rounded-lg px-3 py-2 w-28"
            type="number"
            min="1"
            max="200"
            name="limit"
            value="{{ limit }}"
          />
        </div>
        <button class="px-3 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-500" type="submit">
          一键执行
        </button>
      </form>

      <div id="batch-status" class="space-y-3">
        <div class="text-slate-600">点击“一键执行”开始。</div>
      </div>
    </div>
  </div>
{% endblock %}

